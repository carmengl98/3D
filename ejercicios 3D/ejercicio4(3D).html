<!DOCTYPE html>
<html>
  <head>
    <title>WebGL transformations: translation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js"></script>

    <script id="shaderVs" type="x-shader/x-vertex">
      attribute vec4 a_Position;
      uniform mat4 u_Matrix;
      void main() {
        gl_Position = u_Matrix * a_Position;
      }
    </script>

    <script id="shaderFs" type="x-shader/x-fragment">
      void main() {
        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
      }
    </script>
    <script>
      var gl;
      var count = 0.0;
      function init() {
        // Get canvas,
        // init WebGL context,
        // and shaders ...
        // Draw Scene
        drawScene();
      }

      function drawScene() {
        // Clear canvas
        gl.clear(gl.COLOR_BUFFER_BIT);
        // Calcualte position
        var position = Math.sin(count);
        var matrix = mat4.fromTranslation(mat4.create(), [position, 0.0, 0.0]);
        // Set uniform value (u_Matrix) in vertex shader
        var mvMatrixUniform = gl.getUniformLocation(gl.program, "u_Matrix");
        gl.uniformMatrix4fv(mvMatrixUniform, false, matrix);
        // Draw
        gl.drawArrays(gl.TRIANGLES, 0, 3);
        // Call drawScene again in the next browser repaint
        count += 0.01;
        requestAnimationFrame(drawScene);
      }
    </script>

</head>
  <body onload="init()">
    <canvas id="myCanvas" width="640" height="480"></canvas>
    <br>
    Step: <input type="text" value="0.01" id="step">
  </body>
</html>
