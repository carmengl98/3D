<!DOCTYPE html>
<html>
  <head>
    <title>WebGL projections: orthographic</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js"></script>
    <script id="shaderVs" type="x-shader/x-vertex">
      attribute vec4 a_Position;
      attribute vec3 a_Color;
      uniform mat4 u_pMatrix;
      uniform mat4 u_mvMatrix;
      varying highp vec4 v_Color;
      void main() {
        gl_Position = u_pMatrix * u_mvMatrix * a_Position;
        v_Color = vec4(a_Color, 1.0);
      }
    </script>

    <script id="shaderFs" type="x-shader/x-fragment">
      varying highp vec4 v_Color;
      void main() {
        gl_FragColor = v_Color;
      }
    </script>
    <script>
      var gl;
      var count = 0.0;
      function init() {
        // Get canvas object from the DOM
        var canvas = document.getElementById("myCanvas");
        // Init WebGL context
        gl = canvas.getContext("webgl");
        if (!gl) {
          console.log("Failed to get the rendering context for WebGL");
          return;
        }
        // Init shaders
        var vs = document.getElementById('shaderVs').innerHTML;
        var fs = document.getElementById('shaderFs').innerHTML;
        initShaders(gl, vs, fs);
        // Init vertex shader
        initVertexShader(gl);
        // Init projection matrix
        initProjection(gl, canvas);
        // Set clear canvas color
        gl.clearColor(0.0, 0.0, 0.0, 1.0);
        // Draw Scene
      //  drawScene();

        function initProjection(gl, canvas) {
          // Write u_pMatrix
          var pMatrixUniform = gl.getUniformLocation(gl.program, "u_pMatrix");
          var ratio = canvas.width / canvas.height;
          var pMatrix = mat4.ortho(mat4.create(), -ratio, ratio, -1.0, 1.0, 1.0, -1.0);
          gl.uniformMatrix4fv(pMatrixUniform, false, pMatrix);
        }

        function initShaders(gl, vs_source, fs_source) {
          // Compile shaders
          var vertexShader = makeShader(gl, vs_source, gl.VERTEX_SHADER);
          var fragmentShader = makeShader(gl, fs_source, gl.FRAGMENT_SHADER);

          // Create program
          var glProgram = gl.createProgram();

          // Attach and link shaders to the program
          gl.attachShader(glProgram, vertexShader);
          gl.attachShader(glProgram, fragmentShader);
          gl.linkProgram(glProgram);

          // Use program
          gl.useProgram(glProgram);
          gl.program = glProgram;
        }

        function makeShader(gl, src, type) {
          var shader = gl.createShader(type);
          gl.shaderSource(shader, src);
          gl.compileShader(shader);
          if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
            alert("Error compiling shader: " + gl.getShaderInfoLog(shader));
            return;
          }
            return shader;
        }
      }

    </script>
<body onload="init()">
  <canvas id="myCanvas" width="640" height="480"></canvas><br>
  <b>Rotation</b>
  <input type="checkbox" name="rotation" checked><br>
  <b>WebGL primitive</b>
  <input type="radio" name="primitive" value="triangles" checked> Triangles
  <input type="radio" name="primitive" value="lines"> Lines<br>
  <b>Projection type</b>
  <input type="radio" name="projection" value="perspective" checked> Perspective
  <input type="radio" name="projection" value="orthographic"> Orthographic<br>
</body>
